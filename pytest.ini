# Keep test configs consistent across local & CI
# 本地与 CI 统一测试配置（报告路径、重试、告警等）
# ローカルとCIの設定を統一（レポート出力・リトライ・警告抑制）

[pytest]
# 仅在 tests/ 目录下发现测试
testpaths = tests

# 通用参数（本地/CI 通用）
addopts =
    -q
    -ra
    --maxfail=1
    --disable-warnings
    --reruns=2
    --reruns-delay=2
    # 统一生成 HTML 报告到 playwright-report/index.html（与 CI 一致）
    --html=playwright-report/index.html
    --self-contained-html

# 可选：隐藏部分第三方包的弃用告警
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# 不需要手动声明插件；安装了 pytest-playwright 后会自动加载
# plugins = pytest_playwright.plugin  ← 只有在本机无法识别 page fixture 时才取消注释
